<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="mp.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="clock-display" class="clock-display"></div>

    <!-- Help Button / Modal -->
    <!-- Top Right Controls -->
    <div class="top-right-group">
        <input type="text" id="shortcut-input" class="shortcut-input" placeholder="Cmd‚Üí" maxlength="1">
        <button id="btn-utaten" class="help-btn" title="UtaTen/Lyrics"
            style="color: #ff5e5e; border-color: #ff5e5e;">Ê≠å</button>
        <button id="help-btn" class="help-btn" title="Shortcuts">‚ñº</button>
    </div>

    <!-- UtaTen Container -->
    <div id="utaten-container" class="utaten-container">
        <div class="utaten-bar">
            <span>UtaTen Link</span>
            <button onclick="document.getElementById('utaten-container').style.display='none'"
                style="cursor:pointer; background:none; border:none; font-size:1.2rem;">√ó</button>
        </div>
        <iframe src="https://utaten.com/" id="utaten-frame"></iframe>
    </div>
    <div id="help-modal" class="help-modal">
        <div class="help-content">
            <h3>„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà„Ç≠„Éº</h3>
            <ul class="help-list">
                <li><span>A / S / D / F</span> |‚Üê / ‚óè‚Üê / -5s / -2s</li>
                <li><span>G</span> ÂÜçÁîü / ‰∏ÄÊôÇÂÅúÊ≠¢</li>
                <li><span>H / J / K / L</span> +2s / +5s / ‚Üí‚óè / ‚Üí|</li>
                <li><span>Z / X / C / V</span> ÊúÄÂàù / ÂâçÊõ≤ / Ê¨°Êõ≤ / ÊúÄÂæå</li>
                <li><span>:</span> „Çø„Ç§„É†„Çπ„Çø„É≥„ÉóÂÖ•Âäõ (T1...|comment:[])</li>
                <li><span>Shift + T</span> „Çø„Ç§„É†„Çπ„Çø„É≥„Éó‰∏ÄË¶ßË°®Á§∫ / „Ç∏„É£„É≥„Éó</li>
                <li><span>Shift + [1-0, -, ^]</span> ÊåáÂÆö‰ΩçÁΩÆ(%)„Ç∑„Éº„ÇØ (/„ÇÑ\‰ΩµÁî®ÂèØ)</li>
                <li><span>Q / E / W</span> „É´„Éº„Éó / ÂÖ®‰Ωì„É´„Éº„Éó / „Ç∑„É£„ÉÉ„Éï„É´</li>
                <li><span>Shift + A</span> „Åô„Åπ„Å¶ÈÅ∏Êäû</li>
                <li><span>[ / ]</span> ÈÅ∏ÊäûÈ†ÖÁõÆ„Çí Ë§áË£Ω / ÂâäÈô§</li>
                <li><span>‚Üë / ‚Üì</span> Èü≥ÈáèË™øÊï¥</li>
                <li><span>ESC</span> „Éò„É´„ÉóÈñâ„Åò„Çã</li>
            </ul>
            <div
                style="font-size: 0.75rem; border-top: 1px solid var(--border); padding-top: 0.5rem; margin-top: 0.5rem; color: var(--text-muted);">
                <strong>Êï∞ÂÄ§„Ç≠„ÉºÂØæÂøú (Shift + Key):</strong><br>
                1: 0% | 2: 8% | 3: 16% | 4: 25% | 5: 33% | 6: 41%<br>
                7: 50% | 8: 58% | 9: 66% | 0: 75% | -: 83% | ^: 91%
            </div>
            <button onclick="document.getElementById('help-modal').classList.remove('active')" class="btn">Èñâ„Åò„Çã</button>
        </div>
    </div>

    <!-- Held Keys Indicator (Bottom Left) -->
    <div id="held-keys-indicator"
        style="position: fixed; bottom: 15px; left: 15px; z-index: 5000; font-family: monospace; font-size: 36pt; color: #fff; background: transparent; pointer-events: none; transition: opacity 0.2s; opacity: 0; text-shadow: 2px 2px 4px #000;">
    </div>

    <!-- Lock Overlay -->
    <div id="lock-overlay" class="lock-overlay">
        <div class="lock-visual-container">
            <svg class="lock-svg" width="80" height="80">
                <circle class="lock-bg-circle" cx="40" cy="40" r="35" />
                <circle id="lock-progress-circle" class="lock-fg-circle" cx="40" cy="40" r="35" />
            </svg>
            <div class="lock-icon">üîí</div>
        </div>
    </div>

    <div class="app-container vertical-layout">
        <!-- New Order: 1. Player/Info, 2. Add Song, 3. Queue -->

        <div class="main-content">
            <!-- 1Ë°åÁõÆ: Player & Info -->
            <div class="player-container">
                <div id="player-wrapper" class="video-frame">
                    <div id="youtube-player"></div>
                    <div id="soundcloud-player" style="display: none; width: 100%; height: 100%;"></div>
                    <div id="vimeo-player" style="display: none; width: 100%; height: 100%;"></div>
                </div>

                <div id="cumulative-time" class="cumulative-overlay">00:00:00</div>

                <!-- „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„Éª„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
                <div class="progress-overlay" id="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>

                <div class="info-group">
                    <div class="time-display">
                        <span id="current-time">0:00</span> / <span id="duration">0:00</span>
                    </div>
                    <div class="title-row-main">
                        <select id="now-tier" class="info-input tier-select-main">
                            <option value="">Tier</option>
                            <option value="üíØ">üíØ</option>
                            <option value="ÔºäÔºäÔºäÔºäÔºäÔºä">ÔºäÔºäÔºäÔºäÔºäÔºä</option>
                            <option value="ÔºäÔºäÔºäÔºäÔºä">ÔºäÔºäÔºäÔºäÔºä</option>
                            <option value="ÔºäÔºäÔºäÔºä">ÔºäÔºäÔºäÔºä</option>
                            <option value="ÔºäÔºäÔºä">ÔºäÔºäÔºä</option>
                            <option value="ÔºäÔºä">ÔºäÔºä</option>
                            <option value="Ôºä">Ôºä</option>
                            <option value="‚ñ≥">‚ñ≥</option>
                            <option value="√ó">√ó</option>
                            <option value="-">-</option>
                            <option value="Fail">Fail</option>
                        </select>
                        <input type="text" id="now-title" class="info-input title" placeholder="Song Title">
                    </div>
                    <input type="text" id="now-author" class="info-input" placeholder="Artist">
                    <textarea id="now-memo" class="info-input" placeholder="Memo" rows="1"
                        style="color: var(--text-muted); font-size: 0.9rem; resize: vertical; min-height: 2em;"></textarea>
                    <input type="text" id="now-id" class="info-input" placeholder="Video ID / URL">
                </div>

                <!-- Row 1: Z X C V -->
                <div class="controls-row">
                    <button class="btn" id="btn-first" title="Top">Top<small>Z</small></button>
                    <button class="btn" id="btn-prev" title="Prev">‚èÆ<small>X</small></button>
                    <button class="btn" id="btn-next" title="Next">‚è≠<small>C</small></button>
                    <button class="btn" id="btn-last" title="End">End<small>V</small></button>
                </div>

                <!-- Row 2: A S D F G H J K L -->
                <div class="controls-row all-controls">
                    <button class="btn" id="btn-seek-back30" title="-1/36">|‚Üê<small>A</small></button>
                    <button class="btn" id="btn-seek-back10" title="-1/72">‚óè‚Üê<small>S</small></button>
                    <button class="btn" id="btn-seek-back5" title="-5s">-5s<small>D</small></button>
                    <button class="btn" id="btn-seek-back" title="-2s">-2s<small>F</small></button>
                    <button class="btn" id="btn-pause" title="Play/Pause">‚ñ∂/||<small>G</small></button>
                    <button class="btn" id="btn-seek-fwd" title="+2s">+2s<small>H</small></button>
                    <button class="btn" id="btn-seek-fwd5" title="+5s">+5s<small>J</small></button>
                    <button class="btn" id="btn-seek-fwd10" title="+1/72">‚Üí‚óè<small>K</small></button>
                    <button class="btn" id="btn-seek-fwd30" title="+1/36">‚Üí|<small>L</small></button>
                </div>

                <!-- Row 3: Loop/Shuf/Copy/Del/IO/Lock -->
                <div class="controls-row io-controls">
                    <div class="btn-group"
                        style="display: flex; gap: 0; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; position: relative;">
                        <div
                            style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); font-size: 0.55rem; color: var(--text-muted); pointer-events: none; z-index: 10;">
                            Loop</div>
                        <button class="btn" id="btn-loop"
                            style="border:none; border-radius:0; border-right:1px solid var(--border); min-width:50px; padding-top: 0.8rem;">One<small>Q</small></button>
                        <button class="btn" id="btn-queue-loop"
                            style="border:none; border-radius:0; min-width:55px; padding-top: 0.8rem;">Queue<small>E</small></button>
                    </div>
                    <button class="btn" id="btn-shuffle">Shuf<small>W</small></button>
                    <button class="btn" id="btn-copy-sel" title="Copy Selected">Copy<small>[</small></button>
                    <button class="btn" id="btn-delete" style="color: var(--accent);">Del<small>]</small></button>

                    <select id="preset-select" class="btn preset-select" style="min-width: 100px;">
                        <option value="">Presets</option>
                        <option value="2345667.txt">2345667</option>
                    </select>
                    <button id="btn-export" class="btn">Export</button>
                    <button id="btn-import" class="btn">Import</button>
                    <button id="btn-lock" class="btn lock-btn">
                        <div class="lock-visual-container mini">
                            <svg class="lock-svg" width="40" height="40">
                                <circle class="lock-bg-circle" cx="20" cy="20" r="18" />
                                <circle id="lock-btn-progress-circle" class="lock-fg-circle" cx="20" cy="20" r="18" />
                            </svg>
                            <div class="lock-icon">üîí</div>
                        </div>
                        <span class="lock-text">Lock</span>
                    </button>
                </div>

                <!-- Èü≥ÈüøË®≠ÂÆö: Èü≥ÈáèË™øÊï¥ -->
                <div class="audio-effects add-section"
                    style="padding: 0.75rem; border-top: 1px solid var(--border); margin-top: 1rem;">
                    <div class="audio-row" style="display: flex; align-items: center; gap: 1rem;">
                        <label style="font-size: 0.85rem; color: var(--text-muted); min-width: 80px;">üîâ Volume</label>
                        <input type="range" id="volume-slider" min="0" max="100" step="1" value="100"
                            style="flex: 1; accent-color: var(--primary);">
                        <input type="number" id="volume-input" min="0" max="100" value="100"
                            style="width: 50px; background: transparent; border: 1px solid var(--border); color: var(--primary-light); text-align: center; border-radius: 4px; font-family: monospace;">
                        <span style="font-size: 0.85rem; color: var(--primary-light);">%</span>
                    </div>
                </div>
            </div>

            <!-- Add New Song (Add to Queue„ÇíÂ§ß„Åç„Åè) -->
            <div class="add-section">
                <h3
                    style="margin:0 0 0.5rem 0; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5rem;">
                    Add Song
                    <button id="btn-recommend-vocaloid" class="btn small-btn"
                        style="font-size: 0.75rem; border-color: #00ffd5; background: linear-gradient(135deg, #008080, #00aaaa) !important; color: #fff;">üíô
                        Vocaloid</button>
                </h3>
                <div class="input-row">
                    <div style="flex:1; display:flex; flex-direction:column; gap:0.5rem;">
                        <input type="text" id="add-url" class="app-input" placeholder="YouTube/SoundCloud/Vimeo URL">
                        <div class="input-row">
                            <input type="text" id="add-title" class="app-input add-input-large" placeholder="Song Title"
                                style="flex: 2; min-width: 150px;">
                            <input type="text" id="add-author" class="app-input add-input-large" placeholder="Artist"
                                style="flex: 1; min-width: 100px;">
                            <textarea id="add-memo" class="app-input add-input-large" placeholder="Memo" rows="1"
                                style="flex: 1; min-width: 100px; resize: vertical; min-height: 2em; box-sizing: border-box;"></textarea>
                            <select id="add-tier" class="app-input tier-select">
                                <option value="">Tier</option>
                                <option value="üíØ">üíØ</option>
                                <option value="ÔºäÔºäÔºäÔºäÔºäÔºä">ÔºäÔºäÔºäÔºäÔºäÔºä</option>
                                <option value="ÔºäÔºäÔºäÔºäÔºä">ÔºäÔºäÔºäÔºäÔºä</option>
                                <option value="ÔºäÔºäÔºäÔºä">ÔºäÔºäÔºäÔºä</option>
                                <option value="ÔºäÔºäÔºä">ÔºäÔºäÔºä</option>
                                <option value="ÔºäÔºä">ÔºäÔºä</option>
                                <option value="Ôºä">Ôºä</option>
                                <option value="‚ñ≥">‚ñ≥</option>
                                <option value="√ó">√ó</option>
                                <option value="-">-</option>
                                <option value="Fail">Fail</option>
                            </select>
                        </div>
                    </div>
                    <div style="display:flex; flex-direction:column; gap:0.5rem;">
                        <button id="btn-add" class="btn primary-btn big-add-btn" style="flex:1;">Add to
                            Queue<br>([)</button>
                        <button id="btn-load-file" class="btn orange-btn" style="font-size:0.8rem; padding:0.4rem;">Load
                            File</button>
                    </div>
                </div>
            </div>

            <!-- ÂÜÖÈÉ®‰øùÂ≠òÁî®ÔºàÈùûË°®Á§∫Ôºâ -->
            <div style="display: none;">
                <input type="number" id="sleep-min">
            </div>
        </div>

        <!-- Queue Section -->
        <div class="right-panel">
            <div class="queue-header">
                <div style="display: flex; flex-direction: column;">
                    <strong>Queue</strong>
                    <span id="queue-status" style="font-size: 0.7rem; opacity: 0.6;">0 / 32767</span>
                </div>
                <div class="header-actions">
                    <select id="sort-mode" class="btn small-btn sort-select"
                        style="padding: 0.2rem 0.4rem; min-width: 70px;">
                        <option value="manual">ÊâãÂãï</option>
                        <option value="tier">TierÈ†Ü</option>
                    </select>
                    <button id="btn-dedupe" class="btn orange-btn small-btn">Dedupe</button>
                    <button id="btn-copy-sel-q" class="btn primary-btn small-btn">Copy</button>
                    <button id="btn-delete-q" class="btn red-btn small-btn">Delete</button>
                    <button id="btn-clear" class="btn red-btn small-btn">Clear</button>
                </div>
            </div>
            <ul id="queue-list" class="queue-list"></ul>
            <div class="queue-footer">
                Drag: Reorder | üìã: Copy | üóëÔ∏è: Delete
            </div>
        </div>
    </div>

    <!-- Modal for File Import -->
    <input type="file" id="file-input" style="display: none;"
        accept=".json,.txt,.mp3,.wav,.m4a,.mp4,.mkv,.webp,.gif,.png,.jpeg,.jpg,.svg">

    <script src="https://w.soundcloud.com/player/api.js"></script>
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script src="mp.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>

</html>